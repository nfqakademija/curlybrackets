{% extends 'base.html.twig' %}

{% block title %}Product index{% endblock %}

{% block body %}
    <h1>Produktai</h1>
    <hr>
    <button class="btn btn-success"><a href="{{ path('product_new') }}">Įkelti naują produktą</a></button>

    <table class="table">
        <thead>
        <tr>
            <th>Pavadinimas</th>
            <th>Atsiimti iki</th>
            <th>Nuotrauka</th>
            <th>Aprašymas</th>
            <th>Būsena</th>
            <th>Atiduotas</th>
            <th>Sukurta</th>
            <th>Atnaujinta</th>
            <th>Savininko vartotojo vardas</th>
            <th>Savininko el. paštas</th>

        </tr>
        </thead>
        <tbody>
        {% for product in products %}
            <tr>
                <td>{{ product.title }}</td>
                <td>{{ product.deadline ? product.deadline|date('Y-m-d H:i:s') : '' }}</td>
                {% if product.picture is not null %}
                    <td><img src="{{ (vich_uploader_asset(product, 'pictureFile'))|imagine_filter("square") }}"
                             width="200" height="200"
                             alt="Food picture"></td>
                {% else %}
                    <td>Paveiklėlio nėra :)</td>
                {% endif %}
                <td>{{ product.description }}</td>
                <td>{{ product.status ? 'Įjungtas' : 'Išjungtas' }}</td>
                <td>{{ product.givenAway ? 'Atiduotas' : 'Neatiduotas' }}</td>
                <td>{{ product.createdAt ? product.createdAt|date('Y-m-d H:i:s') : '' }}</td>
                <td>{{ product.updatedAt ? product.updatedAt|date('Y-m-d H:i:s') : '' }}</td>
                <td>{{ product.user.username }}</td>
                <td>{{ product.user.email }}</td>

                {% if (app.user.id) == (product.user.id) %}
                <td>
                    <button class="btn btn-success"><a
                                href="{{ path('product_edit', {'id': product.id}) }}">Redaguoti</a></button>
                    {{ include('product/_delete_form.html.twig') }}
                </td>
                {% endif %}
            </tr>
        {% else %}
            <tr>
                <td colspan="10">no records found</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>


{% endblock %}
